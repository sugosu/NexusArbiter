{
  "classes": [
    {
      "id": "external.User",
      "file_path": null,
      "class_name": null,
      "role": "external_actor",
      "purpose": "Represents a human invoking the program exactly once via CLI. Provides command-line arguments (argv) as the sole input source (no stdin, no loops).",
      "depends_on": [],
      "used_by": [],
      "interactions": [],
      "notes": [
        "Not a class; MUST NOT be generated as code.",
        "Input channel is argv only."
      ]
    },
    {
      "id": "main.Main",
      "file_path": "main.py",
      "class_name": "Main",
      "role": "entry_point",
      "purpose": "Application entry point. Receives argv from the external user invocation, wires dependencies, and runs exactly one operation.",
      "depends_on": [
        "core.logging.AppLogger",
        "core.service.TodoService"
      ],
      "used_by": [],
      "interactions": [
        {
    "target_id": "external.User",
    "interaction_method": "invoke(json_command)",
    "interaction_way": "external input",
    "semantics": "Receives a single JSON command provided as a command-line argument for one operation; no stdin, no interactive loop."
  },
        {
          "target_id": "core.logging.AppLogger",
          "interaction_method": "info/error",
          "interaction_way": "method call",
          "semantics": "Logs application startup and any fatal errors."
        },
        {
          "target_id": "core.service.TodoService",
          "interaction_method": "add_todo(title, path)/list_todos(path)/delete_todo(todo_id, path)",
          "interaction_way": "method call",
          "semantics": "Invokes exactly one service method based on parsed argv. Passes the storage path explicitly as a method-level parameter."
        }
      ],
      "notes": [
        "Wires up all dependencies and calls exactly one service method per invocation.",
        "No business logic here; only orchestration and argv parsing into a single operation."
      ]
    },
    {
      "id": "core.service.TodoService",
      "file_path": "core/service.py",
      "class_name": "TodoService",
      "role": "domain_service",
      "purpose": "Encapsulate TODO domain logic: create, retrieve, update, and delete TODO items, enforcing basic invariants.",
      "depends_on": [
        "core.logging.AppLogger",
        "core.repository.TodoRepository"
      ],
      "used_by": [
        "main.Main"
      ],
      "interactions": [
        {
          "target_id": "core.logging.AppLogger",
          "interaction_method": "debug/info/error",
          "interaction_way": "method call",
          "semantics": "Logs detailed domain events such as number of todos loaded, saved, or filtered."
        },
        {
          "target_id": "core.repository.TodoRepository",
          "interaction_method": "load_all(path)/save_all(path, todos)",
          "interaction_way": "method call",
          "semantics": "Service retrieves and persists lists of Todo entities through repository APIs, passing the storage path as a method-level parameter."
        }
      ],
      "notes": [
        "Responsible for ensuring non-empty titles, id uniqueness, and basic validation.",
        "Repository returns and accepts domain models, not raw dictionaries.",
        "Path ownership is explicit: service methods receive 'path' and pass it to the repository."
      ]
    },
    {
      "id": "core.repository.TodoRepository",
      "file_path": "core/repository.py",
      "class_name": "TodoRepository",
      "role": "repository",
      "purpose": "Provide a persistence abstraction over a collection of Todo entities, independent of storage details.",
      "depends_on": [
        "core.logging.AppLogger",
        "core.storage.JsonStorage"
      ],
      "used_by": [
        "core.service.TodoService"
      ],
      "interactions": [
        {
          "target_id": "core.logging.AppLogger",
          "interaction_method": "debug/error",
          "interaction_way": "method call",
          "semantics": "Logs low-level persistence operations and failures."
        },
        {
          "target_id": "core.storage.JsonStorage",
          "interaction_method": "read(path)/write(path, data)",
          "interaction_way": "method call",
          "semantics": "Repository adapts between domain models and serialized JSON data."
        }
      ],
      "notes": [
        "Responsible for mapping between raw JSON and Todo domain objects.",
        "Follows method-level path ownership: every public repository method receives 'path' as a parameter."
      ]
    },
    {
      "id": "core.storage.JsonStorage",
      "file_path": "core/storage.py",
      "class_name": "JsonStorage",
      "role": "storage_adapter",
      "purpose": "Low-level JSON file storage adapter.",
      "depends_on": [
        "core.logging.AppLogger"
      ],
      "used_by": [
        "core.repository.TodoRepository"
      ],
      "interactions": [
        {
          "target_id": "core.logging.AppLogger",
          "interaction_method": "debug/error",
          "interaction_way": "method call",
          "semantics": "Logs file paths, read/write operations, and I/O errors."
        }
      ],
      "notes": [
        "Responsible only for bytes/JSON I/O with the filesystem.",
        "No domain knowledge; it deals with generic JSON-serializable structures.",
        "Path ownership is external: callers always pass 'path' explicitly."
      ]
    },
    {
      "id": "core.logging.AppLogger",
      "file_path": "core/logging.py",
      "class_name": "AppLogger",
      "role": "logging_adapter",
      "purpose": "Application-level logging wrapper around Python's logging.",
      "depends_on": [],
      "used_by": [
        "main.Main",
        "core.service.TodoService",
        "core.repository.TodoRepository",
        "core.storage.JsonStorage"
      ],
      "interactions": [],
      "notes": [
        "Provides info/debug/error APIs.",
        "Does not know or care about path ownership; it just logs messages."
      ]
    }
  ]
}
