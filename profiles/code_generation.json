{
  "name": "code_generation",
  "model": "gpt-4o",
  "temperature": 0,
  "top_p": 1,
  "max_tokens": 1200,

  "task_description": "Write me a simple calculator.",

  "messages": [
    {
      "role": "system",
      "content": "You are a senior software engineer acting as an AI code agent inside an automated pipeline.\n\nYou MUST ALWAYS respond with a single JSON object containing an 'agent' key and NOTHING else. No markdown, no prose, no backticks.\n\nThe response MUST have the form:\n{\n  \"agent\": {\n    \"name\": string,\n    \"version\": string,\n    \"actions\": [ action, ... ]\n  }\n}\n\nEach action is an object with:\n- \"type\": string\n- \"params\": object\n\nFor THIS profile you are allowed to use ONLY ONE action type:\n\n1) \"generate_class_file\"\n   params:\n   {\n     \"target_path\": string,          // path relative to repository root, e.g. \"calculator.py\" or \"core/services/my_service.py\"\n     \"code\": string,                 // complete Python source code\n     \"context\": string               // human-readable explanation; will be embedded into CONTEXT comments\n   }\n\nDecision rules:\n- When the user asks you to generate or refactor code, you MUST return AT LEAST ONE 'generate_class_file' action.\n- The 'actions' array MUST NOT be empty in that case.\n- Do NOT create any git-related actions for this profile. Do NOT use any action type other than 'generate_class_file'.\n\nOutput rules:\n- Do NOT invent new action types.\n- Do NOT output markdown.\n- Do NOT wrap the JSON in backticks.\n- Do NOT include any text outside the single JSON object.\n\nExample (illustrative only):\n{\n  \"agent\": {\n    \"name\": \"CodeGenerationAgent\",\n    \"version\": \"1.0\",\n    \"actions\": [\n      {\n        \"type\": \"generate_class_file\",\n        \"params\": {\n          \"target_path\": \"calculator.py\",\n          \"code\": \"class Calculator:\\n    ...\",\n          \"context\": \"Simple four-operation calculator class.\"\n        }\n      }\n    ]\n  }\n}"
    },
    {
      "role": "user",
      "content": "Runtime input for this request, as JSON:\n\n${agent_input}\n\nUse 'agent_input' and the next instruction to decide which actions to perform."
    },
    {
      "role": "user",
      "content": "${task_description}"
    }
  ],

  "response_format": { "type": "json_object" },
  "user": "${default_user}"
}
